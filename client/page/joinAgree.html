<!-- 은지 > 회원가입 동의 -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>carryAll_회원가입 동의</title>
  <link rel="stylesheet" href="../css/styles.css">
  <link rel="stylesheet" href="../css/login.css">
  <link rel="stylesheet" href="../css/join.css">
</head>
<body>
  <!-- 헤더 가져오기 -->
  <header id="header"></header>

  <!-- 컨텐츠 -->
  <section class="container">
    <!-- <form action="../../index" method="post" class="inputForm" id="termsForm"> -->
    <form class="inputForm" id="termsForm">
      <fieldset>
        <legend class="formTit">회원가입</legend>
          <ul class="pathBox">
            <li><a style="font-weight: 500;" href="javascript:void(0);">약관동의</a></li>
            <li><a href="/joinForm">정보입력</a></li>
            <li><a href="javascript:void(0);">가입완료</a></li>
          </ul>

          <div class="box agreeBox">
            <ul class="joinBox">
              <li>
                <label>
                  <input type="checkbox" id="allAgreeCheckbox">
                  <span>약관 전체 동의</span>
                </label>
                <p class="agreeDesc">회원가입을 위해 이용약관 및 정보이용 안내에 대한 동의가 필요합니다.</p>
              </li>
              
              <li>
                <div style="position: relative;">
                  <label class="agree">
                    <input type="checkbox" class="subAgreeCheckbox" id="termsCheckbox">
                    <span>이용약관 (필수)</span>
                  </label>
                  <img class="iconArrow" src="../img/icon_arrow.png" alt="이용약관 (필수)">
                </div>
                <div class="chkBox active">
                  회사는 회원가입, 민원 등 고객상담 처리, 본인확인(14세 미만 아동 확인) 등 의사소통을 위한 정보 활용 및
                  이벤트 등과 같은 마케팅용도 활용, 회원의 서비스 이용에 대한 통계, 이용자들의 개인정보를 통한 서비스
                  개발을 위해 아래와 같은 개인정보를 수집하고 있습니다.
                  <br>
                  1. - 목적 : 이용자 식별 및 본인여부 확인-
                  항목 : 이름, 아이디, 비밀번호,닉네임, 이메일, 휴대폰번호, 주소, 전화번호 등- 보유 및 이용기간 :
                  회원탈퇴 후 5일까지
                </div>
              </li>

              <li>
                <div style="position: relative;">
                  <label class="agree">
                    <input type="checkbox" class="subAgreeCheckbox" id="privacyCheckbox">
                    <span>개인정보 수집 및 이용 (필수)</span>
                  </label>
                  <img class="iconArrow" src="../img/icon_arrow.png" alt="이용약관 (필수)">
                </div>
                <div class="chkBox active">
                  회사는 회원가입, 민원 등 고객상담 처리, 본인확인(14세 미만 아동 확인) 등 의사소통을 위한 정보 활용 및
                  이벤트 등과 같은 마케팅용도 활용, 회원의 서비스 이용에 대한 통계, 이용자들의 개인정보를 통한 서비스
                  개발을 위해 아래와 같은 개인정보를 수집하고 있습니다.
                  <br>
                  1. - 목적 : 이용자 식별 및 본인여부 확인-
                  항목 : 이름, 아이디, 비밀번호,닉네임, 이메일, 휴대폰번호, 주소, 전화번호 등- 보유 및 이용기간 :
                  회원탈퇴 후 5일까지
                </div>
              </li>
            </ul>

            <h2 class="certiTit">본인 인증방법</h2>
            <button type="button" id="phoneVerify">휴대폰 본인인증</button>
            <p class="certiDesc">이미 회원이신가요? <a href="/loginMember">로그인하기</a></p>
            <div class="certiBtn">
              <button type="button" class="btnType01 before">이전</button>
              <button type="button" class="btnType02 after">다음</button>
            </div>
          </div>
      </fieldset>                        
    </form>
  </section>

  <!-- 푸터 가져오기 -->
  <footer id="footer"></footer>

  <!-- 탑버튼 가져오기 -->
  <div class="top">top</div>

  <script src="../js/top.js"></script>
  <script src="../js/header.js"></script>
  <script src="../js/footer.js"></script>

  <!-- 회원가입 폼 script -->
  <script>
    const allAgreeCheckbox = document.getElementById('allAgreeCheckbox');
    const termsCheckbox = document.getElementById('termsCheckbox');
    const privacyCheckbox = document.getElementById('privacyCheckbox');
    const subAgreeCheckboxes = document.querySelectorAll('.subAgreeCheckbox');

    // 1. 약관 전체 동의 체크박스 이벤트 처리
    allAgreeCheckbox.addEventListener('change', function() {
      if (this.checked) {
        subAgreeCheckboxes.forEach(checkbox => {
          checkbox.checked = true;
        });
      } else {
        subAgreeCheckboxes.forEach(checkbox => {
          checkbox.checked = false;
        });
      }
    });

    // 2. 개별 약관 동의 체크박스 이벤트 처리
    subAgreeCheckboxes.forEach(checkbox => {
      checkbox.addEventListener('change', function() {
        if (!this.checked) {
          allAgreeCheckbox.checked = false;
        } else {
          let allChecked = true;
          
          subAgreeCheckboxes.forEach(subCheckbox => {
            if (!subCheckbox.checked) {
              allChecked = false;
            }
          });
          if (allChecked) {
            allAgreeCheckbox.checked = true;
            const chkBoxAll = document.querySelectorAll('.chkBox');
            chkBoxAll.forEach(idx => {
              idx.classList.add('active');
            })
          }
        }
      });
    });



    // 4. 화살표 클릭시 toggle
    const iconArrows = document.querySelectorAll('.iconArrow');
    iconArrows.forEach(iconArrow => {
      iconArrow.addEventListener('click', function() {
        const chkBox = iconArrow.parentElement.nextElementSibling;
        console.log(chkBox)
        chkBox.classList.toggle('active');
      });
    });

    // 5. 휴대폰 본인인증 closing
    document.addEventListener('DOMContentLoaded', function() {
      const phoneVerifyButton = document.getElementById('phoneVerify');
      phoneVerifyButton.addEventListener('click', function() {
        alert('본인인증 서비스 준비중입니다.');
      });
    });

    // 6. 이전 - 다음 버튼
    const beforeButton = document.querySelector('.btnType01.before');
    beforeButton.addEventListener('click', function() {
      history.back();
    });
    const afterButton = document.querySelector('.btnType02.after');
    afterButton.addEventListener('click', function() {
      window.location.href = '/joinForm';
    });

    // 7. 다음 버튼 클릭 시 필수 약관 동의 확인
    afterButton.addEventListener('click', function(e) {
      const allChecked = document.getElementById('allAgreeCheckbox').checked;
      if (!allChecked) {
        alert('(필수) 사항에 모두 동의하셔야 합니다.');
        // 페이지 이벤트 전파 중지
        e.stopPropagation();
      }
    });

    // 8. 헤더 미노출
    document.addEventListener('DOMContentLoaded', function () {
      document.querySelector('.headmenu.logout').classList.add('none');
      document.querySelector('.headmenu.mypage').classList.add('none');
    });
    
  </script>
</body>
</html>